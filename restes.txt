<!-- <table>
                    <tr>
                        <th>N°</th>
                        <th>Titre de la demande</th>
                        <th>Status</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Station - services</td>
                        <td><div class="status-new"><button onclick="redirect()">Nouveau</button></div></td>
                    </tr>
                </table> -->



<?php
// Connexion à la base de données
$conn = new mysqli('localhost', 'root', '', 'bp');

if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Récupération des demandes
$sql = "SELECT id, titre, statut FROM demandes";
$result = $conn->query($sql);
?>

<table>
    <tr>
        <th>N°</th>
        <th>Titre de la demande</th>
        <th>Statut</th>
    </tr>
    <?php
    if ($result->num_rows > 0) {
        while($row = $result->fetch_assoc()) {
            echo "<tr>";
            echo "<td>" . $row["id"] . "</td>";
            echo "<td>" . $row["titre"] . "</td>";
            echo "<td>" . $row["statut"] . "</td>";
            echo "<td><a href='details.php?id=" . $row["id"] . "'>Nouveau</a></td>";
            echo "</tr>";
        }
    } else {
        echo "<tr><td colspan='4'>Aucune demande</td></tr>";
    }
    ?>
</table>

<?php
$conn->close();
?>


<div class="info-group">
            <p class="info-value">John Doe</p>
        </div>
        <div class="info-group">
            <p class="info-value">Jane</p>
        </div>
        <div class="info-group">
            <p class="info-value">35</p>
        </div>
        <div class="button-group">
            <button class="valider">Valider</button>
            <button class="rejeter">Rejeter</button>
        </div>


<?php
// Connexion à la base de données
$conn = new mysqli('localhost', 'root', '', 'bp');

if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Récupération de l'ID de la demande
$id = $_GET['id'];

// Récupération des détails de la demande
$sql = "SELECT * FROM demandes WHERE id = $id";
$result = $conn->query($sql);

if ($result->num_rows > 0) {
    $row = $result->fetch_assoc();
    echo "<h1>Demande #" . $row["id"] . "</h1>";
    echo "<p>Titre: " . $row["titre"] . "</p>";
    echo "<p>Description: " . $row["description"] . "</p>";
    echo "<p>Statut: " . $row["statut"] . "</p>";
    // Ajout des boutons "Valider" et "Rejeter"
    echo "<form action='update_status.php' method='post'>
            <input type='hidden' name='id' value='" . $row["id"] . "'>
            <button type='submit' name='action' value='valider' class='valider'>Valider</button>
            <button type='submit' name='action' value='rejeter' class='rejeter'>Rejeter</button>
          </form>";
} else {
    echo "Demande non trouvée";
}

$conn->close();
?>